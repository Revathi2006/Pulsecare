<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>First Aid Guide | PulseCare</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #00695c;
      --primary-light: #439889;
      --primary-dark: #003d33;
      --accent: #ff5722;
      --light: #f5f5f5;
      --dark: #333;
      --gray: #757575;
      --danger: #e53935;
      --success: #43a047;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4f0f2 100%);
      min-height: 100vh;
      padding: 2rem;
      color: var(--dark);
      line-height: 1.6;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      background-color: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      box-shadow: 0 15px 30px rgba(0, 105, 92, 0.1);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      transform: translateY(0);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .container:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 105, 92, 0.15);
    }

    header {
      text-align: center;
      margin-bottom: 2.5rem;
      position: relative;
    }

    h1 {
      color: var(--primary);
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: linear-gradient(to right, var(--primary), var(--primary-light));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      display: inline-block;
    }

    .logo {
      font-size: 2.8rem;
      margin-bottom: 1rem;
      display: inline-block;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .subtitle {
      color: var(--gray);
      font-weight: 300;
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .search-container {
      position: relative;
      margin-bottom: 2rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    #question {
      width: 100%;
      padding: 1.2rem 1.5rem;
      padding-right: 3.5rem;
      border: 2px solid rgba(0, 105, 92, 0.2);
      border-radius: 50px;
      font-size: 1rem;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      background-color: rgba(255, 255, 255, 0.8);
    }

    #question:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 5px 20px rgba(0, 105, 92, 0.2);
    }

    .search-icon {
      position: absolute;
      right: 1.5rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary);
      cursor: pointer;
    }

    button {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: white;
      padding: 1rem 2.5rem;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 105, 92, 0.3);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin: 0 auto;
    }

    button:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary));
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 105, 92, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    #response {
      margin-top: 2.5rem;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      padding: 2rem;
      font-size: 1rem;
      color: var(--dark);
      text-align: left;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    #response.show {
      opacity: 1;
      transform: translateY(0);
    }

    #response h2 {
      color: var(--primary);
      margin-bottom: 1rem;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    #response ul, #response ol {
      padding-left: 1.5rem;
      margin-bottom: 1rem;
    }

    #response li {
      margin-bottom: 0.5rem;
      position: relative;
    }

    #response li:before {
      content: "•";
      color: var(--primary);
      font-weight: bold;
      display: inline-block;
      width: 1em;
      margin-left: -1em;
    }

    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      color: var(--gray);
      font-style: italic;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(0, 105, 92, 0.1);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .error {
      color: var(--danger);
      background-color: rgba(229, 57, 53, 0.1);
      padding: 1rem;
      border-radius: 8px;
      border-left: 4px solid var(--danger);
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .success {
      color: var(--success);
      background-color: rgba(67, 160, 71, 0.1);
      padding: 1rem;
      border-radius: 8px;
      border-left: 4px solid var(--success);
    }

    .emergency-section {
      margin-top: 2rem;
      background-color: rgba(255, 87, 34, 0.1);
      padding: 1.5rem;
      border-radius: 15px;
      border-left: 5px solid var(--accent);
      animation: fadeIn 0.8s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .emergency-section h3 {
      color: var(--accent);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .quick-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      margin-top: 2rem;
      justify-content: center;
    }

    .quick-link {
      background-color: rgba(0, 105, 92, 0.1);
      color: var(--primary);
      padding: 0.6rem 1.2rem;
      border-radius: 50px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid rgba(0, 105, 92, 0.2);
    }

    .quick-link:hover {
      background-color: rgba(0, 105, 92, 0.2);
      transform: translateY(-2px);
    }

    footer {
      margin-top: 3rem;
      text-align: center;
      color: var(--gray);
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .container {
        padding: 1.5rem;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      #question {
        padding: 1rem 1.2rem;
        padding-right: 3rem;
      }
      
      button {
        padding: 0.8rem 1.8rem;
      }
    }

    /* Floating animation for emergency elements */
    .floating {
      animation: floating 3s ease-in-out infinite;
    }

    @keyframes floating {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
  </style>
</head>
<body>
  <div class="container animate__animated animate__fadeIn">
    <header>
      <div class="logo floating">
        <i class="fas fa-first-aid"></i>
      </div>
      <h1>First Aid Guide</h1>
      <p class="subtitle">Get immediate, professional first aid advice for any emergency situation</p>
    </header>

    <div class="search-container">
      <input type="text" id="question" placeholder="e.g., How to treat a burn? What to do for choking?" 
             aria-label="First aid question input"/>
      <i class="fas fa-search search-icon" onclick="getFirstAid()"></i>
    </div>

    <button onclick="getFirstAid()" id="search-btn">
      <i class="fas fa-first-aid"></i> Get First Aid Advice
    </button>

    <div class="quick-links">
      <div class="quick-link" onclick="setQuestion('How to perform CPR?')">CPR</div>
      <div class="quick-link" onclick="setQuestion('How to treat burns?')">Burns</div>
      <div class="quick-link" onclick="setQuestion('What to do for choking?')">Choking</div>
      <div class="quick-link" onclick="setQuestion('How to stop bleeding?')">Bleeding</div>
      <div class="quick-link" onclick="setQuestion('How to treat a sprain?')">Sprains</div>
      <div class="quick-link" onclick="setQuestion('What to do for heat stroke?')">Heat Stroke</div>
    </div>

    <div id="response"></div>

    <div class="emergency-section animate__animated animate__pulse animate__infinite">
      <h3><i class="fas fa-exclamation-triangle"></i> Emergency Notice</h3>
      <p>For life-threatening emergencies, call your local emergency number immediately. This guide is for informational purposes only and not a substitute for professional medical advice.</p>
    </div>

    <footer>
      <p>© 2023 PulseCare First Aid Guide | Always consult a healthcare professional for serious injuries</p>
    </footer>
  </div>

  <script>
    function setQuestion(text) {
      document.getElementById('question').value = text;
      document.getElementById('question').focus();
    }

    async function getFirstAid() {
      const apiKey = "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";
      const question = document.getElementById('question').value.trim();
      const responseBox = document.getElementById('response');
      const searchBtn = document.getElementById('search-btn');

      if (!question) {
        responseBox.innerHTML = `
          <div class="error animate__animated animate__shakeX">
            <i class="fas fa-exclamation-circle"></i>
            <span>Please enter a first aid question to get advice.</span>
          </div>
        `;
        responseBox.classList.add('show');
        return;
      }

      // Disable button during request
      searchBtn.disabled = true;
      searchBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';

      responseBox.innerHTML = `
        <div class="loading">
          <div class="spinner"></div>
          <div>Searching for the best first aid advice...</div>
        </div>
      `;
      responseBox.classList.add('show');

      try {
        const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
          method: "POST",
          headers: {
            "Authorization": "Bearer " + apiKey,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            model: "deepseek/deepseek-r1-distill-llama-70b",
            messages: [
              {
                role: "system",
                content: `You are a professional first aid assistant. Provide clear, concise, step-by-step instructions for the requested first aid situation. 
                Format your response with:
                1. A brief 1-sentence summary of the situation
                2. Clear numbered steps (1., 2., 3.)
                3. Warnings about when to seek professional help
                4. Common mistakes to avoid
                
                Keep it professional but compassionate. Use simple language.`
              },
              {
                role: "user",
                content: question
              }
            ],
            temperature: 0.7
          })
        });

        const data = await res.json();
        let reply = data.choices?.[0]?.message?.content || "No advice received.";
        
        // Format the response better
        reply = reply.replace(/\n\d+\./g, '\n<br><strong>$&</strong>'); // Bold the numbers
        reply = reply.replace(/Warning:/gi, '<br><div class="warning"><i class="fas fa-exclamation-triangle"></i> <strong>Warning:</strong>');
        reply = reply.replace(/Note:/gi, '<br><div class="note"><i class="fas fa-info-circle"></i> <strong>Note:</strong>');
        
        responseBox.innerHTML = `
          <h2><i class="fas fa-hand-holding-medical"></i> ${question}</h2>
          <div class="success animate__animated animate__fadeIn">
            <i class="fas fa-check-circle"></i> First aid advice ready
          </div>
          <div class="advice-content animate__animated animate__fadeInUp">
            ${reply.replace(/\n/g, '<br>')}
          </div>
        `;
        
      } catch (err) {
        console.error(err);
        responseBox.innerHTML = `
          <div class="error animate__animated animate__shakeX">
            <i class="fas fa-exclamation-circle"></i>
            <span>Error fetching advice. Please check your connection and try again.</span>
          </div>
        `;
      } finally {
        searchBtn.disabled = false;
        searchBtn.innerHTML = '<i class="fas fa-first-aid"></i> Get First Aid Advice';
        responseBox.classList.add('show');
        
        // Smooth scroll to response
        setTimeout(() => {
          responseBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }, 300);
      }
    }

    // Allow pressing Enter in the input field
    document.getElementById('question').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        getFirstAid();
      }
    });
  </script>
</body>
</html>